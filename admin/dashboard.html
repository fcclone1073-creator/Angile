<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - KTT Store</title>
    <!-- Icons from Lucide/Feather equivalent for vanilla (using FontAwesome or similar via CDN for ease) -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="brand">
                <i class="fas fa-store" style="margin-right: 10px;"></i>
                KTT STORE
            </div>

            <nav class="menu">
                <a href="#" class="menu-item active" onclick="loadView('dashboard', this)">
                    <i class="fas fa-th-large"></i> Tổng quan
                </a>
                <a href="#" class="menu-item" onclick="loadView('customers', this)">
                    <i class="fas fa-users"></i> Quản lý khách hàng
                </a>
                <a href="#" class="menu-item" onclick="loadView('categories', this)">
                    <i class="fas fa-tags"></i> Quản lý danh mục
                </a>
                <a href="#" class="menu-item" onclick="loadView('products', this)">
                    <i class="fas fa-box"></i> Quản lý sản phẩm
                </a>
                <a href="#" class="menu-item" onclick="loadView('orders', this)">
                    <i class="fas fa-shopping-cart"></i> Quản lý đơn hàng
                </a>
                <a href="#" class="menu-item" onclick="loadView('discounts', this)">
                    <i class="fas fa-ticket-alt"></i> Quản lý mã giảm giá
                </a>
                <a href="#" class="menu-item" onclick="loadView('promotions', this)">
                    <i class="fas fa-bullhorn"></i> Quản lý khuyến mãi
                </a>
                <a href="#" class="menu-item" onclick="loadView('notifications', this)">
                    <i class="fas fa-bell"></i> Quản lý thông báo
                </a>
                <a href="#" class="menu-item role-admin hidden" onclick="loadView('settings', this)">
                    <i class="fas fa-cog"></i> Cài đặt hệ thống
                </a>
            </nav>

            <div class="sidebar-footer">
                <a href="#" class="menu-item">
                    <i class="fas fa-moon"></i> Chế độ tối
                </a>
                <a href="#" class="menu-item" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Đăng xuất
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Topbar -->
            <header class="topbar">
                <div class="breadcrumb" style="font-size: 0.9rem; color: #777;">Dashboard > <span id="pageTitle"
                        style="color: var(--secondary-color); font-weight: 600;">Dashboard</span></div>
                <!-- User info removed from right side to match screenshot clean look, or keep if preferred. Screenshot shows "Dashboard > Dashboard" on left. -->
                <!-- We keep user info for utility but make it subtle -->
                <div class="user-info flex items-center">
                    <span id="userName" style="font-weight: 500; margin-right: 10px;">Admin</span>
                </div>
            </header>

            <!-- Dynamic Content Area -->
            <div id="content" class="content-area">
                <!-- Content will be loaded here via JS -->
            </div>
        </main>
    </div>

    <!-- Templates for Views (Hidden) -->
    <template id="tpl-dashboard">
        <h2 class="mb-4" style="font-size: 1.75rem; font-weight: 700;">Tổng quan</h2>

        <!-- Row 1 -->
        <!-- Row 1 -->
        <div class="card-grid mb-4">
            <!-- Total Products -->
            <div class="card flex justify-between items-center">
                <div>
                    <div class="card-title">Tổng sản phẩm</div>
                    <div class="card-value" id="dash-total-products">...</div>
                    <div class="text-sm text-gray-500 mt-1">Sản phẩm trong kho</div>
                </div>
                <div class="icon-box bg-blue-100 text-blue-600">
                    <i class="fas fa-box"></i>
                </div>
            </div>

            <!-- Out of stock -->
            <div class="card flex justify-between items-center">
                <div>
                    <div class="card-title">Sản phẩm hết hàng</div>
                    <div class="card-value" id="dash-out-stock">...</div>
                    <div class="text-sm text-gray-500 mt-1">Cần nhập thêm</div>
                </div>
                <div class="icon-box bg-red-100 text-red-600">
                    <i class="fas fa-trash"></i>
                </div>
            </div>

            <!-- Promotion -->
            <div class="card flex justify-between items-center">
                <div>
                    <div class="card-title">Đang khuyến mãi</div>
                    <div class="card-value" id="dash-promo">...</div>
                    <div class="text-sm text-gray-500 mt-1">Sản phẩm giảm giá</div>
                </div>
                <div class="icon-box bg-green-100 text-green-600">
                    <i class="fas fa-dollar-sign"></i>
                </div>
            </div>
        </div>

        <!-- Row 2 -->
        <div class="card-grid mb-4">
            <!-- Users -->
            <div class="card flex justify-between items-center">
                <div>
                    <div class="card-title">Tổng người dùng</div>
                    <div class="card-value" id="dash-total-users">...</div>
                    <div class="text-sm text-gray-500 mt-1">Khách hàng hệ thống</div>
                </div>
                <div class="icon-box bg-purple-100 text-purple-600">
                    <i class="fas fa-users"></i>
                </div>
            </div>

            <!-- Orders -->
            <div class="card flex justify-between items-center">
                <div>
                    <div class="card-title">Tổng đơn hàng</div>
                    <div class="card-value" id="dash-total-orders">...</div>
                    <div class="text-sm text-gray-500 mt-1">Đơn hàng đã đặt</div>
                </div>
                <div class="icon-box bg-orange-100 text-orange-600">
                    <i class="fas fa-shopping-bag"></i>
                </div>
            </div>

            <!-- Revenue -->
            <div class="card flex justify-between items-center">
                <div>
                    <div class="card-title">Doanh thu</div>
                    <div class="card-value" id="dash-revenue">...</div>
                    <div class="text-sm text-gray-500 mt-1">Tổng doanh thu</div>
                </div>
                <div class="icon-box bg-green-100 text-green-600">
                    <i class="fas fa-dollar-sign"></i>
                </div>
            </div>
        </div>

        <!-- Row 3: Complex Stats -->
        <!-- Row 3: Complex Stats -->
        <div class="card-grid">
            <!-- Coupons -->
            <div class="card">
                <h3 class="font-bold mb-3" style="font-size: 1rem;">Khuyến mãi & Mã giảm giá</h3>
                <div class="flex justify-between mb-2">
                    <div>
                        <div class="text-sm text-gray-500">Tổng số mã giảm giá</div>
                        <div class="text-xl font-bold">0</div>
                        <div class="mt-2 text-sm"><span class="text-green-600">0 đang hoạt động</span> <span
                                class="text-red-500 ml-2">0 đã hết hạn</span></div>
                        <div class="mt-2 text-sm text-gray-500">Lượt sử dụng</div>
                        <div class="font-bold">0</div>
                    </div>
                    <div class="text-sm">
                        <div class="flex justify-between mb-1"><span>Loại giảm giá</span></div>
                        <div class="flex justify-between mb-1"><span class="text-gray-500">Giảm theo %</span> <span
                                class="font-bold">0 (0%)</span></div>
                        <div class="flex justify-between mb-1"><span class="text-gray-500">Giảm số tiền cố định</span>
                            <span class="font-bold">0 (0%)</span>
                        </div>
                        <div class="mt-2 text-gray-500">Loại mã</div>
                        <div class="flex justify-between"><span class="text-gray-500">weekend</span> <span
                                class="font-bold">0 (0%)</span></div>
                    </div>
                </div>
            </div>

            <!-- Ratings -->
            <div class="card">
                <h3 class="font-bold mb-3" style="font-size: 1rem;">Đánh giá sản phẩm</h3>
                <div class="flex">
                    <div class="mr-4 text-center" style="min-width: 100px;">
                        <div class="text-sm text-gray-500">Tổng quan đánh giá</div>
                        <div class="text-3xl font-bold mt-1">0.0</div>
                        <div class="text-gray-300 text-sm"><i class="fas fa-star"></i><i class="fas fa-star"></i><i
                                class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <div class="text-xs text-gray-400 mt-1">0 đánh giá</div>
                    </div>
                    <div class="flex-1 text-sm">
                        <div class="text-gray-500 mb-2">Phân bố đánh giá</div>
                        <div class="flex items-center mb-1"><span class="w-8">5 sao</span> <i
                                class="fas fa-star text-gray-300 text-xs mr-1"></i> <span class="ml-auto font-bold">0
                                (0%)</span></div>
                        <div class="flex items-center mb-1"><span class="w-8">4 sao</span> <i
                                class="fas fa-star text-gray-300 text-xs mr-1"></i> <span class="ml-auto font-bold">0
                                (0%)</span></div>
                        <div class="flex items-center mb-1"><span class="w-8">3 sao</span> <i
                                class="fas fa-star text-gray-300 text-xs mr-1"></i> <span class="ml-auto font-bold">0
                                (0%)</span></div>
                    </div>
                </div>
            </div>

            <!-- Notifications -->
            <div class="card">
                <h3 class="font-bold mb-3" style="font-size: 1rem;">Thống kê thông báo</h3>
                <div class="flex justify-between">
                    <div>
                        <div class="text-sm text-gray-500">Tổng quan thông báo</div>
                        <div class="flex justify-between items-center mt-2 w-full"><span class="text-sm">Tổng số thông
                                báo</span> <span class="font-bold">0</span></div>
                        <div class="flex justify-between items-center mt-1 w-full"><span
                                class="text-sm text-green-600">Đang hoạt động</span> <span
                                class="font-bold text-green-600">0</span></div>
                        <div class="flex justify-between items-center mt-1 w-full"><span
                                class="text-sm text-gray-500">Chờ gửi</span> <span class="font-bold">0</span></div>
                        <div class="flex justify-between items-center mt-1 w-full"><span
                                class="text-sm text-gray-500">Đã hết hạn</span> <span class="font-bold">0</span></div>
                    </div>
                    <div class="pl-4 border-l border-gray-100">
                        <div class="text-sm text-gray-500 mb-2">Phân loại thông báo</div>
                        <div class="flex justify-between mb-1 text-sm"><span>Bộ sưu tập mới</span> <span
                                class="font-bold">0 (0%)</span></div>
                        <div class="flex justify-between mb-1 text-sm"><span>Chính sách</span> <span class="font-bold">0
                                (0%)</span></div>
                        <div class="flex justify-between mb-1 text-sm"><span>Ngày lễ</span> <span class="font-bold">0
                                (0%)</span></div>
                        <div class="flex justify-between mb-1 text-sm"><span>Chào mừng</span> <span class="font-bold">0
                                (0%)</span></div>
                        <div class="flex justify-between mb-1 text-sm"><span>Khuyến mãi</span> <span class="font-bold">0
                                (0%)</span></div>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="tpl-products">
        <h2 class="mb-4" style="font-size: 1.75rem; font-weight: 700;">Quản lý sản phẩm</h2>
        <p class="mb-4 text-gray-500">Quản lý và theo dõi tất cả sản phẩm của bạn</p>

        <!-- Stats Row -->
        <div class="card-grid mb-4">
            <!-- Total Products -->
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #3b82f6;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Tổng sản phẩm</div>
                        <div class="icon-box bg-blue-100 text-blue-600"
                            style="width: 32px; height: 32px; font-size: 1rem;">
                            <i class="fas fa-box"></i>
                        </div>
                    </div>
                    <div class="card-value" id="stat-total-products">0</div>
                </div>
            </div>

            <!-- Male Products -->
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #8b5cf6;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Sản phẩm nam</div>
                        <div class="icon-box bg-purple-100 text-purple-600"
                            style="width: 32px; height: 32px; font-size: 1rem;">
                            <i class="fas fa-male"></i>
                        </div>
                    </div>
                    <div class="card-value" id="stat-male-products">0</div>
                </div>
            </div>

            <!-- Female Products -->
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #ec4899;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Sản phẩm nữ</div>
                        <div class="icon-box bg-pink-100 text-pink-500"
                            style="width: 32px; height: 32px; font-size: 1rem;">
                            <i class="fas fa-female"></i>
                        </div>
                    </div>
                    <div class="card-value" id="stat-female-products">0</div>
                </div>
            </div>

            <!-- Revenue (Mock for now or 0) -->
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #22c55e;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Tổng doanh thu</div>
                        <div class="icon-box bg-green-100 text-green-600"
                            style="width: 32px; height: 32px; font-size: 1rem;">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                    </div>
                    <div class="card-value">0đ</div>
                </div>
            </div>
        </div>

        <!-- Filter Bar -->
        <div class="filter-bar flex-wrap">
            <div class="input-group mb-0 flex items-center"
                style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 0 10px; flex: 2; margin-bottom: 0;">
                <i class="fas fa-search text-gray-400"></i>
                <input type="text" id="searchProduct" class="input-field" placeholder="Nhập tên sản phẩm..."
                    style="border: none; background: transparent; padding: 10px; width: 100%;">
            </div>

            <select class="input-field" id="filterCategory" style="flex: 1;">
                <option value="">Tất cả danh mục</option>
                <!-- Helper to populate categories -->
            </select>

            <select class="input-field" id="filterGender" style="flex: 1;">
                <option value="">Tất cả giới tính</option>
                <option value="Nam">Nam</option>
                <option value="Nữ">Nữ</option>
                <option value="Unisex">Unisex</option>
            </select>

            <select class="input-field" id="filterStatus" style="flex: 1;">
                <option value="">Tất cả trạng thái</option>
                <option value="active">Hoạt động</option>
                <option value="inactive">Đã ẩn</option>
            </select>

            <select class="input-field" id="sortProduct" style="flex: 0.8;">
                <option value="newest">Mới nhất</option>
                <option value="price_asc">Giá tăng dần</option>
                <option value="price_desc">Giá giảm dần</option>
            </select>

            <button class="btn btn-primary" onclick="openAddProductModal()" style="white-space: nowrap;">+ Thêm sản
                phẩm</button>
        </div>

        <!-- Table -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th style="width: 25%;">Tên sản phẩm</th>
                        <th style="width: 15%;">Giá</th>
                        <th style="width: 15%;">Danh mục</th>
                        <th style="width: 10%;">Đối tượng</th>
                        <th style="width: 15%;">Ngày tạo</th>
                        <th style="width: 10%;">Trạng thái</th>
                        <th style="width: 10%;">Thao tác</th>
                    </tr>
                </thead>
                <tbody id="productTableBody">
                    <!-- Rows rendered via JS -->
                </tbody>
            </table>
        </div>
    </template>

    <!-- Modal Template for Add/Edit Product -->
    <div id="productModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden"
        style="z-index: 9999;">
        <div class="bg-white rounded-lg p-6 w-full max-w-2xl">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="modalTitle">Thêm sản phẩm mới</h3>
                <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700"><i
                        class="fas fa-times"></i></button>
            </div>
            <form id="productForm">
                <input type="hidden" id="productId">
                <div class="grid grid-cols-2 gap-4">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Tên sản phẩm</label>
                        <input type="text" id="prodName" class="w-full border rounded px-3 py-2" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Giá (VNĐ)</label>
                        <input type="number" id="prodPrice" class="w-full border rounded px-3 py-2" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Giá cũ (VNĐ)</label>
                        <input type="number" id="prodOldPrice" class="w-full border rounded px-3 py-2">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Danh mục</label>
                        <select id="prodCategory" class="w-full border rounded px-3 py-2" required>
                            <!-- Populated via JS -->
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Giới tính (Đối tượng)</label>
                        <select id="prodGender" class="w-full border rounded px-3 py-2">
                            <option value="Nam">Nam</option>
                            <option value="Nữ">Nữ</option>
                            <option value="Unisex">Unisex</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Tồn kho</label>
                        <input type="number" id="prodStock" class="w-full border rounded px-3 py-2" value="0">
                    </div>
                    <div class="mb-4 col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Hình ảnh (URL)</label>
                        <input type="text" id="prodImage" class="w-full border rounded px-3 py-2"
                            placeholder="https://..." required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Trạng thái</label>
                        <select id="prodStatus" class="w-full border rounded px-3 py-2">
                            <option value="active">Hoạt động</option>
                            <option value="inactive">Không hoạt động</option>
                        </select>
                    </div>
                </div>
                <div class="flex justify-between mt-4">
                    <button type="button" onclick="closeModal()" class="btn"
                        style="background: #e5e7eb; color: #374151;">Hủy</button>
                    <button type="submit" class="btn btn-primary">Lưu sản phẩm</button>
                </div>
            </form>
        </div>
    </div>

    <template id="tpl-customers">
        <h2 class="mb-4" style="font-size: 1.75rem; font-weight: 700;">Quản lý khách hàng</h2>
        <p class="mb-4 text-gray-500">Quản lý và theo dõi tất cả khách hàng trong hệ thống</p>

        <!-- Stats Row -->
        <div class="card-grid mb-4">
            <!-- Total Customers -->
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #2563eb;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Tổng số khách hàng</div>
                        <div class="icon-box bg-blue-100 text-blue-600"
                            style="width: 32px; height: 32px; font-size: 1rem;">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                    <div class="card-value" id="cust-total">...</div>
                </div>
            </div>

            <!-- Active -->
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #22c55e;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Đang hoạt động</div>
                        <div class="icon-box bg-green-100 text-green-600"
                            style="width: 32px; height: 32px; font-size: 1rem;">
                            <i class="fas fa-user-check"></i>
                        </div>
                    </div>
                    <div class="card-value" id="cust-active">...</div>
                </div>
            </div>

            <!-- Disabled -->
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #ef4444;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Đã vô hiệu hóa</div>
                        <div class="icon-box bg-red-100 text-red-500"
                            style="width: 32px; height: 32px; font-size: 1rem;">
                            <i class="fas fa-user-times"></i>
                        </div>
                    </div>
                    <div class="card-value" id="cust-disabled">...</div>
                </div>
            </div>
        </div>

        <!-- Filter Bar -->
        <div class="filter-bar flex-wrap">
            <div class="input-group mb-0 flex items-center"
                style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 0 10px; flex: 2; margin-bottom: 0;">
                <i class="fas fa-search text-gray-400"></i>
                <input type="text" id="searchCustomer" class="input-field"
                    placeholder="Nhập tên, email hoặc số điện thoại"
                    style="border: none; background: transparent; padding: 10px; width: 100%;">
            </div>

            <select class="input-field" id="filterCustStatus" style="flex: 1;">
                <option value="" id="cust-filter-all">Tất cả trạng thái</option>
                <option value="active">Đang hoạt động</option>
                <option value="disabled">Đã vô hiệu hóa</option>
            </select>

            <select class="input-field" id="filterCustGender" style="flex: 1;">
                <option value="">Tất cả giới tính</option>
                <option value="Nam">Nam</option>
                <option value="Nữ">Nữ</option>
            </select>

            <select class="input-field" id="sortCustField" style="flex: 0.8;">
                <option value="id">Theo ID</option>
                <option value="name">Theo Tên</option>
            </select>

            <select class="input-field" id="sortCustOrder" style="flex: 0.8;">
                <option value="desc">Giảm dần</option>
                <option value="asc">Tăng dần</option>
            </select>

            <!-- Admin should not create users manually; users self-register -->
        </div>

        <!-- Table -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th style="width: 25%;">Họ và tên</th>
                        <th style="width: 10%;">Giới tính</th>
                        <th style="width: 25%;">Email</th>
                        <th style="width: 15%;">Số điện thoại</th>
                        <th style="width: 15%;">Trạng thái</th>
                        <th style="width: 10%;">Thao tác</th>
                    </tr>
                </thead>
                <tbody id="customerTableBody">
                    <!-- Rows rendered via JS -->
                </tbody>
            </table>
        </div>
    </template>

    <template id="tpl-categories">
        <h2 class="mb-4" style="font-size: 1.75rem; font-weight: 700;">Quản lý danh mục</h2>
        <p class="mb-4 text-gray-500">Quản lý và theo dõi tất cả danh mục sản phẩm</p>

        <!-- Stats Row -->
        <div class="card-grid mb-4">
            <!-- Total Categories -->
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #3b82f6;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Tổng số danh mục</div>
                        <div class="icon-box bg-blue-100 text-blue-600"
                            style="width: 32px; height: 32px; font-size: 1rem;">
                            <i class="fas fa-tags"></i>
                        </div>
                    </div>
                    <div class="card-value" id="cat-total">...</div>
                </div>
            </div>
        </div>

        <!-- Filter Bar -->
        <div class="filter-bar flex-wrap">
            <div class="input-group mb-0 flex items-center"
                style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 0 10px; flex: 2; margin-bottom: 0;">
                <i class="fas fa-search text-gray-400"></i>
                <input type="text" id="searchCategory" class="input-field" placeholder="Tìm kiếm danh mục..."
                    style="border: none; background: transparent; padding: 10px; width: 100%;">
            </div>

            <button class="btn btn-primary" onclick="openAddCategoryModal()" style="white-space: nowrap;">+ Thêm danh
                mục</button>
        </div>

        <!-- Table -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th style="width: 40%;">Tên danh mục</th>
                        <th style="width: 20%;">Hình ảnh</th>
                        <th style="width: 25%;">Ngày tạo</th>
                        <th style="width: 15%;">Thao tác</th>
                    </tr>
                </thead>
                <tbody id="categoryTableBody">
                    <!-- Rows rendered via JS -->
                </tbody>
            </table>
        </div>
    </template>

    <!-- Modal Template for Add/Edit User -->
    <div id="userModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center"
        style="z-index: 9999;">
        <div class="bg-white rounded-lg p-6 w-full max-w-xl">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="userModalTitle">Cập nhật khách hàng</h3>
                <button onclick="closeUserModal()" class="text-gray-500 hover:text-gray-700"><i
                        class="fas fa-times"></i></button>
            </div>
            <form id="userForm">
                <input type="hidden" id="userId">
                <div class="grid grid-cols-2 gap-4">
                    <div class="mb-4 col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Họ và tên</label>
                        <input type="text" id="userNameInput" class="w-full border rounded px-3 py-2" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Email (không sửa)</label>
                        <input type="email" id="userEmail" class="w-full border rounded px-3 py-2" readonly disabled>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Số điện thoại</label>
                        <input type="text" id="userPhone" class="w-full border rounded px-3 py-2" required>
                    </div>
                    <!-- Admin không tạo/đổi mật khẩu tại đây -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Giới tính</label>
                        <select id="userGender" class="w-full border rounded px-3 py-2">
                            <option value="Nam">Nam</option>
                            <option value="Nữ">Nữ</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Trạng thái</label>
                        <select id="userStatus" class="w-full border rounded px-3 py-2">
                            <option value="active">Đang hoạt động</option>
                            <option value="disabled">Vô hiệu hóa</option>
                        </select>
                    </div>
                    <!-- Admin không set role tại đây -->
                </div>
                <div class="flex justify-between mt-4">
                    <button type="button" onclick="closeUserModal()" class="btn"
                        style="background: #e5e7eb; color: #374151;">Hủy</button>
                    <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Discounts -->
    <div id="discountModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center"
        style="z-index: 9999;">
        <div class="bg-white rounded-lg p-6 w-full max-w-2xl">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="discountModalTitle">Thêm mã giảm giá</h3>
                <button onclick="closeDiscountModal()" class="text-gray-500 hover:text-gray-700"><i
                        class="fas fa-times"></i></button>
            </div>
            <form id="discountForm" onsubmit="saveDiscount(event)">
                <input type="hidden" id="discountId">
                <div class="grid grid-cols-2 gap-4">
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Mã giảm giá</label>
                        <input type="text" id="discCode" class="w-full border rounded px-3 py-2"
                            placeholder="VD: SALE50" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Loại giảm</label>
                        <select id="discType" class="w-full border rounded px-3 py-2">
                            <option value="percent">Theo %</option>
                            <option value="fixed">Số tiền cố định</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Giá trị</label>
                        <input type="number" id="discValue" class="w-full border rounded px-3 py-2" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Giá trị tối đa (VNĐ)</label>
                        <input type="number" id="discMaxValue" class="w-full border rounded px-3 py-2"
                            placeholder="Tùy chọn">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Trạng thái</label>
                        <select id="discStatus" class="w-full border rounded px-3 py-2">
                            <option value="active">Hoạt động</option>
                            <option value="expired">Hết hạn</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Giới hạn sử dụng</label>
                        <input type="number" id="discUsageLimit" class="w-full border rounded px-3 py-2"
                            placeholder="0 = không giới hạn">
                    </div>
                    <div class="mb-4 col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Ngày hết hạn</label>
                        <input type="date" id="discExpiryDate" class="w-full border rounded px-3 py-2">
                    </div>
                </div>
                <div class="flex justify-end">
                    <button type="button" onclick="closeDiscountModal()" class="btn mr-2"
                        style="background: #e5e7eb; color: #374151;">Hủy</button>
                    <button type="submit" class="btn btn-primary">Lưu mã</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Promotions -->
    <div id="promotionModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center"
        style="z-index: 9999;">
        <div class="bg-white rounded-lg p-6 w-full max-w-2xl">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="promotionModalTitle">Thêm chương trình khuyến mãi</h3>
                <button onclick="closePromotionModal()" class="text-gray-500 hover:text-gray-700"><i
                        class="fas fa-times"></i></button>
            </div>
            <form id="promotionForm" onsubmit="savePromotion(event)">
                <input type="hidden" id="promotionId">
                <div class="grid grid-cols-2 gap-4">
                    <div class="mb-4 col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Tên chương trình</label>
                        <input type="text" id="promoTitle" class="w-full border rounded px-3 py-2" required>
                    </div>
                    <div class="mb-4 col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Mô tả</label>
                        <textarea id="promoDesc" class="w-full border rounded px-3 py-2" rows="2"></textarea>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Giảm giá (text)</label>
                        <input type="text" id="promoDiscount" class="w-full border rounded px-3 py-2"
                            placeholder="VD: 50%" required>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Loại</label>
                        <select id="promoType" class="w-full border rounded px-3 py-2">
                            <option value="general">Khuyến mãi chung</option>
                            <option value="flash_sale">Flash Sale</option>
                            <option value="holiday">Ngày lễ</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Trạng thái</label>
                        <select id="promoStatus" class="w-full border rounded px-3 py-2">
                            <option value="active">Hoạt động</option>
                            <option value="expired">Hết hạn</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Số sản phẩm</label>
                        <input type="number" id="promoProductCount" class="w-full border rounded px-3 py-2" value="0">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Số danh mục</label>
                        <input type="number" id="promoCategoryCount" class="w-full border rounded px-3 py-2" value="0">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Ngày bắt đầu</label>
                        <input type="date" id="promoStartDate" class="w-full border rounded px-3 py-2">
                    </div>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-1">Ngày kết thúc</label>
                        <input type="date" id="promoEndDate" class="w-full border rounded px-3 py-2">
                    </div>
                </div>
                <div class="flex justify-end">
                    <button type="button" onclick="closePromotionModal()" class="btn mr-2"
                        style="background: #e5e7eb; color: #374151;">Hủy</button>
                    <button type="submit" class="btn btn-primary">Lưu chương trình</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Notifications -->
    <div id="notificationModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center"
        style="z-index: 9999;">
        <div class="bg-white rounded-lg p-6 w-full max-w-lg">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="notificationModalTitle">Tạo thông báo mới</h3>
                <button onclick="closeNotifModal()" class="text-gray-500 hover:text-gray-700"><i
                        class="fas fa-times"></i></button>
            </div>
            <form id="notificationForm" onsubmit="saveNotification(event)">
                <input type="hidden" id="notificationId">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Tiêu đề</label>
                    <input type="text" id="notifTitle" class="w-full border rounded px-3 py-2" required>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Loại thông báo</label>
                    <select id="notifType" class="w-full border rounded px-3 py-2">
                        <option value="general">Thông báo chung</option>
                        <option value="promotion">Khuyến mãi</option>
                        <option value="system">Hệ thống</option>
                        <option value="welcome">Chào mừng</option>
                        <option value="policy">Chính sách</option>
                        <option value="maintenance">Bảo trì</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Nội dung chi tiết</label>
                    <textarea id="notifContent" class="w-full border rounded px-3 py-2" rows="3"></textarea>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Trạng thái</label>
                    <select id="notifStatus" class="w-full border rounded px-3 py-2">
                        <option value="sent">Đã gửi</option>
                        <option value="pending">Chờ gửi</option>
                        <option value="expired">Hết hạn</option>
                    </select>
                </div>
                <div class="flex justify-end">
                    <button type="button" onclick="closeNotifModal()" class="btn mr-2"
                        style="background: #e5e7eb; color: #374151;">Hủy</button>
                    <button type="submit" class="btn btn-primary">Gửi thông báo</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Categories -->
    <div id="categoryModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center"
        style="z-index: 9999;">
        <div class="bg-white rounded-lg p-6 w-full max-w-lg">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="categoryModalTitle">Thêm danh mục mới</h3>
                <button onclick="closeCategoryModal()" class="text-gray-500 hover:text-gray-700"><i
                        class="fas fa-times"></i></button>
            </div>
            <form id="categoryForm">
                <input type="hidden" id="categoryId">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Tên danh mục</label>
                    <input type="text" id="catName" class="w-full border rounded px-3 py-2" placeholder="VD: Áo"
                        required>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Hình ảnh (URL)</label>
                    <input type="text" id="catImage" class="w-full border rounded px-3 py-2" placeholder="https://..."
                        required>
                </div>
                <div class="flex justify-between mt-4">
                    <button type="button" onclick="closeCategoryModal()" class="btn"
                        style="background: #e5e7eb; color: #374151;">Hủy</button>
                    <button type="submit" class="btn btn-primary">Lưu danh mục</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal for Order Details -->
    <div id="orderDetailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center"
        style="z-index: 9999;">
        <div class="bg-white rounded-lg p-6 w-full max-w-3xl max-h-screen overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">Chi tiết đơn hàng <span id="modalOrderId"></span></h3>
                <button onclick="closeOrderDetail()" class="text-gray-500 hover:text-gray-700"><i
                        class="fas fa-times"></i></button>
            </div>

            <div class="grid grid-cols-2 gap-4 mb-4">
                <div>
                    <p class="text-sm text-gray-500">Khách hàng</p>
                    <p class="font-medium" id="modalCustomerName">-</p>
                </div>
                <div>
                    <p class="text-sm text-gray-500">Số điện thoại</p>
                    <p class="font-medium" id="modalCustomerPhone">-</p>
                </div>
                <div>
                    <p class="text-sm text-gray-500">Địa chỉ</p>
                    <p class="font-medium" id="modalShippingAddress">-</p>
                </div>
                <div>
                    <p class="text-sm text-gray-500">Ngày đặt</p>
                    <p class="font-medium" id="modalOrderDate">-</p>
                </div>
                <div>
                    <p class="text-sm text-gray-500">Phương thức thanh toán</p>
                    <p class="font-medium" id="modalPaymentMethod">-</p>
                </div>
                <div>
                    <p class="text-sm text-gray-500">Trạng thái</p>
                    <select id="modalOrderStatus" class="border rounded px-3 py-2 w-full">
                        <option value="Pending">Chờ xác nhận</option>
                        <option value="Processing">Đang xử lý</option>
                        <option value="Shipped">Đang giao</option>
                        <option value="Delivered">Đã giao</option>
                        <option value="Cancelled">Đã hủy</option>
                    </select>
                </div>
            </div>

            <h4 class="font-bold mb-2">Sản phẩm đã đặt</h4>
            <div class="table-container mb-4">
                <table>
                    <thead>
                        <tr>
                            <th>Sản phẩm</th>
                            <th>Số lượng</th>
                            <th>Giá</th>
                            <th>Thành tiền</th>
                        </tr>
                    </thead>
                    <tbody id="modalOrderItems">
                    </tbody>
                </table>
            </div>

            <div class="flex justify-between items-center mb-4">
                <span class="text-lg font-bold">Tổng cộng:</span>
                <span class="text-lg font-bold text-green-600" id="modalTotalPrice">0 đ</span>
            </div>

            <div class="flex justify-between">
                <button type="button" onclick="closeOrderDetail()" class="btn"
                    style="background: #e5e7eb; color: #374151;">Đóng</button>
                <button type="button" onclick="saveOrderStatus()" class="btn btn-primary">Cập nhật trạng thái</button>
            </div>
        </div>
    </div>

    </template>

    <template id="tpl-orders">
        <h2 class="mb-4" style="font-size: 1.75rem; font-weight: 700;">Quản lý đơn hàng</h2>
        <p class="mb-4 text-gray-500">Quản lý và theo dõi tất cả đơn hàng của bạn</p>

        <!-- Stats -->
        <div class="card-grid mb-4" style="grid-template-columns: repeat(4, 1fr);">
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #3b82f6;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Tổng đơn hàng</div>
                        <div class="icon-box bg-blue-100 text-blue-600"><i class="fas fa-shopping-bag"></i></div>
                    </div>
                    <div class="card-value" id="order-total">0</div>
                </div>
            </div>
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #facc15;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Đơn hàng mới</div>
                        <div class="icon-box bg-yellow-100 text-yellow-400"><i class="fas fa-clock"></i></div>
                    </div>
                    <div class="card-value" id="order-new">0</div>
                </div>
            </div>
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #6366f1;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Đang xử lý</div>
                        <div class="icon-box bg-purple-100 text-purple-600"><i class="fas fa-spinner"></i></div>
                    </div>
                    <div class="card-value" id="order-processing">0</div>
                </div>
            </div>
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #22c55e;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Doanh thu</div>
                        <div class="icon-box bg-green-100 text-green-600"><i class="fas fa-dollar-sign"></i></div>
                    </div>
                    <div class="card-value" id="order-revenue">0đ</div>
                </div>
            </div>
        </div>

        <!-- Filter -->
        <div class="filter-bar flex-wrap">
            <div class="input-group mb-0 flex items-center"
                style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 0 10px; flex: 2; margin-bottom: 0;">
                <i class="fas fa-search text-gray-400"></i>
                <input type="text" id="searchOrder" class="input-field" placeholder="Nhập mã đơn hàng, tên hoặc email"
                    style="border: none; background: transparent; padding: 10px; width: 100%;">
            </div>
            <select class="input-field" id="filterOrderStatus" style="flex: 1;">
                <option value="">Tất cả trạng thái</option>
                <option value="Pending">Chờ xác nhận</option>
                <option value="Processing">Đang xử lý</option>
                <option value="Shipped">Đang giao</option>
                <option value="Delivered">Đã giao</option>
                <option value="Cancelled">Đã hủy</option>
            </select>
            <select class="input-field" id="filterOrderPayment" style="flex: 1;">
                <option value="">Tất cả thanh toán</option>
                <option value="cod">COD</option>
                <option value="banking">Chuyển khoản</option>
            </select>
            <select class="input-field" id="sortOrderDate" style="flex: 1;">
                <option value="desc">Ngày đặt hàng (Mới nhất)</option>
                <option value="asc">Ngày đặt hàng (Cũ nhất)</option>
            </select>
            <select class="input-field" id="sortOrderTotal" style="flex: 0.8;">
                <option value="desc">Giảm dần</option>
                <option value="asc">Tăng dần</option>
            </select>
        </div>

        <!-- Table -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th style="width: 15%;">Mã đơn hàng</th>
                        <th style="width: 25%;">Khách hàng</th>
                        <th style="width: 15%;">Tổng tiền</th>
                        <th style="width: 15%;">Trạng thái</th>
                        <th style="width: 15%;">Ngày đặt</th>
                        <th style="width: 15%;">Thao tác</th>
                    </tr>
                </thead>
                <tbody id="orderTableBody"></tbody>
            </table>
        </div>
    </template>

    <template id="tpl-discounts">
        <div class="flex justify-between items-center mb-4">
            <div>
                <h2 style="font-size: 1.75rem; font-weight: 700;">Quản lý mã giảm giá</h2>
                <p class="text-gray-500">Quản lý và theo dõi các mã giảm giá của cửa hàng</p>
            </div>
            <button class="btn btn-primary" onclick="openAddDiscountModal()">+ Thêm mã giảm giá</button>
        </div>

        <!-- Stats -->
        <div class="card-grid mb-4" style="grid-template-columns: repeat(4, 1fr);">
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #3b82f6;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Tổng mã giảm giá</div>
                        <div class="icon-box bg-blue-100 text-blue-600"><i class="fas fa-tag"></i></div>
                    </div>
                    <div class="card-value" id="discount-total">0</div>
                </div>
            </div>
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #22c55e;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Còn hiệu lực</div>
                        <div class="icon-box bg-green-100 text-green-600"><i class="fas fa-check-circle"></i></div>
                    </div>
                    <div class="card-value" id="discount-active">0</div>
                </div>
            </div>
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #ef4444;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Đã hết hạn</div>
                        <div class="icon-box bg-red-100 text-red-500"><i class="fas fa-times-circle"></i></div>
                    </div>
                    <div class="card-value" id="discount-expired">0</div>
                </div>
            </div>
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #a855f7;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Lượt sử dụng</div>
                        <div class="icon-box bg-purple-100 text-purple-600"><i class="fas fa-history"></i></div>
                    </div>
                    <div class="card-value" id="discount-used">0</div>
                </div>
            </div>
        </div>

        <!-- Filter -->
        <div class="filter-bar flex-wrap">
            <div class="input-group mb-0 flex items-center"
                style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 0 10px; flex: 2; margin-bottom: 0;">
                <i class="fas fa-search text-gray-400"></i>
                <input type="text" id="searchDiscount" class="input-field" placeholder="Nhập mã gi..."
                    style="border: none; background: transparent; padding: 10px; width: 100%;">
            </div>
            <select class="input-field" id="filterDiscountStatus" style="flex: 1;">
                <option value="">Tất cả trạng thái</option>
                <option value="active">Còn hiệu lực</option>
                <option value="expired">Hết hạn</option>
            </select>
            <select class="input-field" id="filterDiscountType" style="flex: 1;">
                <option value="">Tất cả loại</option>
                <option value="percent">Giảm theo %</option>
                <option value="fixed">Giảm số tiền</option>
            </select>
            <select class="input-field" id="filterDiscountCoupon" style="flex: 1;">
                <option value="">Tất cả loại coupon</option>
                <option value="shipping">Vận chuyển</option>
                <option value="order">Đơn hàng</option>
            </select>
            <select class="input-field" id="sortDiscountDate" style="flex: 1;">
                <option value="desc">Ngày tạo (Mới nhất)</option>
                <option value="asc">Ngày tạo (Cũ nhất)</option>
            </select>
            <select class="input-field" id="sortDiscountValue" style="flex: 0.8;">
                <option value="desc">Giảm dần</option>
                <option value="asc">Tăng dần</option>
            </select>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th style="width: 20%;">Mã giảm giá</th>
                        <th style="width: 10%;">Loại</th>
                        <th style="width: 15%;">Giá trị</th>
                        <th style="width: 25%;">Thời hạn</th>
                        <th style="width: 15%;">Trạng thái</th>
                        <th style="width: 15%;">Thao tác</th>
                    </tr>
                </thead>
                <tbody id="discountTableBody"></tbody>
            </table>
        </div>
    </template>

    <template id="tpl-promotions">
        <div class="flex justify-between items-center mb-4">
            <div>
                <h2 style="font-size: 1.75rem; font-weight: 700;">Quản lý khuyến mãi</h2>
                <p class="text-gray-500">Quản lý và theo dõi các chương trình khuyến mãi của cửa hàng</p>
            </div>
            <button class="btn btn-primary" onclick="openAddPromotionModal()">+ Thêm khuyến mãi</button>
        </div>

        <!-- Stats -->
        <div class="card-grid mb-4" style="grid-template-columns: repeat(4, 1fr);">
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #3b82f6;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Tổng khuyến mãi</div>
                        <div class="icon-box bg-blue-100 text-blue-600"><i class="fas fa-bullhorn"></i></div>
                    </div>
                    <div class="card-value" id="promo-total">0</div>
                </div>
            </div>
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #22c55e;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Đang hoạt động</div>
                        <div class="icon-box bg-green-100 text-green-600"><i class="fas fa-bolt"></i></div>
                    </div>
                    <div class="card-value" id="promo-active">0</div>
                </div>
            </div>
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #facc15;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Sắp diễn ra</div>
                        <div class="icon-box bg-yellow-100 text-yellow-400"><i class="fas fa-clock"></i></div>
                    </div>
                    <div class="card-value" id="promo-upcoming">0</div>
                </div>
            </div>
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #ef4444;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Đã hết hạn</div>
                        <div class="icon-box bg-red-100 text-red-500"><i class="fas fa-flag-checkered"></i></div>
                    </div>
                    <div class="card-value" id="promo-expired">0</div>
                </div>
            </div>
        </div>

        <!-- Filter -->
        <div class="filter-bar flex-wrap">
            <div class="input-group mb-0 flex items-center"
                style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 0 10px; flex: 2; margin-bottom: 0;">
                <i class="fas fa-search text-gray-400"></i>
                <input type="text" id="searchPromo" class="input-field" placeholder="Nhập tên hoặc mô tả khuyến mãi"
                    style="border: none; background: transparent; padding: 10px; width: 100%;">
            </div>
            <select class="input-field" id="filterPromoStatus" style="flex: 1;">
                <option value="">Tất cả trạng thái</option>
                <option value="active">Đang diễn ra</option>
                <option value="upcoming">Sắp diễn ra</option>
                <option value="expired">Đã kết thúc</option>
            </select>
            <select class="input-field" id="filterPromoType" style="flex: 1;">
                <option value="">Tất cả loại</option>
                <option value="flash_sale">Flash Sale</option>
                <option value="holiday">Sự kiện</option>
            </select>
            <select class="input-field" id="sortPromoDate" style="flex: 1;">
                <option value="desc">Ngày tạo (Mới nhất)</option>
                <option value="asc">Ngày tạo (Cũ nhất)</option>
            </select>
            <select class="input-field" id="sortPromoValue" style="flex: 0.8;">
                <option value="desc">Giảm dần</option>
                <option value="asc">Tăng dần</option>
            </select>
        </div>

        <!-- Grid for Promotions (Cards) -->
        <div id="promoGrid" class="card-grid" style="grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));">
        </div>
    </template>


    <template id="tpl-notifications">
        <div class="flex justify-between items-center mb-4">
            <div>
                <h2 style="font-size: 1.75rem; font-weight: 700;">Quản lý thông báo</h2>
                <p class="text-gray-500">Quản lý và theo dõi tất cả thông báo trong hệ thống</p>
            </div>
            <button class="btn btn-primary" onclick="openAddNotifModal()">+ Thêm thông báo</button>
        </div>

        <!-- Stats -->
        <div class="card-grid mb-4" style="grid-template-columns: repeat(4, 1fr);">
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #3b82f6;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Tổng số thông báo</div>
                        <div class="icon-box bg-blue-100 text-blue-600"><i class="fas fa-bell"></i></div>
                    </div>
                    <div class="card-value" id="notif-total">0</div>
                </div>
            </div>
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #facc15;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Đang chờ gửi</div>
                        <div class="icon-box bg-yellow-100 text-yellow-400"><i class="fas fa-clock"></i></div>
                    </div>
                    <div class="card-value" id="notif-pending">0</div>
                </div>
            </div>
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #22c55e;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Đang hoạt động</div>
                        <div class="icon-box bg-green-100 text-green-600"><i class="fas fa-check-circle"></i></div>
                    </div>
                    <div class="card-value" id="notif-active">0</div>
                </div>
            </div>
            <div class="card flex justify-between items-center relative overflow-hidden">
                <div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: #ef4444;">
                </div>
                <div class="w-full">
                    <div class="flex justify-between items-start mb-2">
                        <div class="card-title">Đã hết hạn</div>
                        <div class="icon-box bg-red-100 text-red-500"><i class="fas fa-times-circle"></i></div>
                    </div>
                    <div class="card-value" id="notif-expired">0</div>
                </div>
            </div>
        </div>

        <!-- Filter -->
        <div class="filter-bar flex-wrap">
            <div class="input-group mb-0 flex items-center"
                style="background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; padding: 0 10px; flex: 2; margin-bottom: 0;">
                <i class="fas fa-search text-gray-400"></i>
                <input type="text" id="searchNotif" class="input-field"
                    placeholder="Tìm kiếm theo tiêu đề hoặc nội dung..."
                    style="border: none; background: transparent; padding: 10px; width: 100%;">
            </div>
            <select class="input-field" id="filterNotifType" style="flex: 1;">
                <option value="">Tất cả loại</option>
                <option value="welcome">Chào mừng</option>
                <option value="promotion">Khuyến mãi</option>
                <option value="policy">Chính sách</option>
                <option value="maintenance">Bảo trì</option>
            </select>
            <select class="input-field" id="sortNotifDate" style="flex: 1;">
                <option value="desc">Ngày tạo (Mới nhất)</option>
                <option value="asc">Ngày tạo (Cũ nhất)</option>
            </select>
            <select class="input-field" id="sortNotifOrder" style="flex: 0.8;">
                <option value="desc">Giảm dần</option>
                <option value="asc">Tăng dần</option>
            </select>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th style="width: 30%;">Tiêu đề</th>
                        <th style="width: 12%;">Loại</th>
                        <th style="width: 12%;">Trạng thái</th>
                        <th style="width: 8%;">Lượt đọc</th>
                        <th style="width: 15%;">Ngày tạo</th>
                        <th style="width: 15%;">Ngày hết hạn</th>
                        <th style="width: 8%;">Thao tác</th>
                    </tr>
                </thead>
                <tbody id="notifTableBody"></tbody>
            </table>
        </div>
    </template>

    <!-- Modal for Notifications -->
    <div id="notificationModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center"
        style="z-index: 9999;">
        <div class="bg-white rounded-lg p-6 w-full max-w-lg">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold" id="notificationModalTitle">Tạo thông báo mới</h3>
                <button onclick="closeNotifModal()" class="text-gray-500 hover:text-gray-700"><i
                        class="fas fa-times"></i></button>
            </div>
            <form id="notificationForm" onsubmit="saveNotification(event)">
                <input type="hidden" id="notificationId">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Tiêu đề</label>
                    <input type="text" id="notifTitle" class="w-full border rounded px-3 py-2" required>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Loại thông báo</label>
                    <select id="notifType" class="w-full border rounded px-3 py-2">
                        <option value="general">Thông báo chung</option>
                        <option value="promotion">Khuyến mãi</option>
                        <option value="system">Hệ thống</option>
                        <option value="welcome">Chào mừng</option>
                        <option value="policy">Chính sách</option>
                        <option value="maintenance">Bảo trì</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Nội dung chi tiết</label>
                    <textarea id="notifContent" class="w-full border rounded px-3 py-2" rows="3"></textarea>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Trạng thái</label>
                    <select id="notifStatus" class="w-full border rounded px-3 py-2">
                        <option value="sent">Đã gửi</option>
                        <option value="pending">Chờ gửi</option>
                        <option value="expired">Hết hạn</option>
                    </select>
                </div>
                <div class="flex justify-end">
                    <button type="button" onclick="closeNotifModal()" class="btn mr-2"
                        style="background: #e5e7eb; color: #374151;">Hủy</button>
                    <button type="submit" class="btn btn-primary">Gửi thông báo</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/categories.js"></script>
    <script src="js/orders.js"></script>
    <script src="js/discounts.js"></script>
    <script src="js/promotions.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/dashboard.js"></script>
</body>

</html>